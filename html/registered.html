<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册页</title>
    <link rel="stylesheet" href="../css/./registered.css">
</head>

<body>
    <div class="logo">
        <img src="../img/img12/1.png">
    </div>
    <div class="email">
        <ul class="nav">
            <li>注册</li>
            <li>注册新的账号</li>
            <li>登录</li>
        </ul>
        <div class="sce">
            <h4>邮箱注册</h4>
            <div class="sass">
                <ul>
                    <li>
                        <h5>账&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号*</h5>
                        <input type="text" name="zhanghao" id="zhanghao">
                        <span></span>
                    </li>
                    <li>
                        <h5>电子邮箱*</h5>
                        <input type="text" name="youxiang" id="youxiang">
                        <span></span>
                    </li>
                    <li>
                        <h5>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码*</h5>
                        <input type="text" name="mima" id="mima">
                        <span></span>
                    </li>
                    <li>
                        <h5>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;姓*</h5>
                        <input type="text" name="xing" id="xing">
                        <span></span>
                    </li>
                    <li>
                        <h5>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名*</h5>
                        <input type="text" name="ming" id="ming">
                        <span></span>
                    </li>
                    <li>
                        <h5>联系电话*</h5>
                        <input type="text" name="tel" id="tel">
                        <span></span>
                    </li>
                </ul>
                <div class="box">
                    <input type="checkbox">*我已阅读并同意华为公司用户注册协议和隐私声明。
                </div>
                <input type="submit" value="注册" class="regist">

            </div>
            <div class="text"> Uniportal是华为公司对外提供身份认证的唯一入口，在使用华为公司的其他对外服务时，您的Uniportal帐号和登录信息会被共享。</div>
        </div>
        <p>版权所有 © 华为技术有限公司 1998-2020。保留一切权利。 粤A2-20044005号</p>
    </div>
</body>

</html>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.js"></script>
<script>
    let oSpan = document.getElementsByTagName("span");
    let oInput = document.getElementsByTagName("input");
    var flagName = null;
    var flagBain = null;
    var flagMi = null;
    var flagXing = null;
    var flagMing = null;
    var flagTel = null;


    //账号
    oInput[0].onblur = function () {
        var oName = /^\D[a-zA-Z0-9]{5,9}$/;
        if (oName.test(oInput[0].value)) {
            oSpan[0].innerHTML = " ";
            flagName = true;
        } else {
            oSpan[0].innerHTML = "请重新输入"
            flagName = false;
        }
    }

    //电子邮箱
    oInput[1].onblur = function () {
        var oYou = /^[a-zA-Z0-9]{1,}@[a-zA-Z0-9\.]{1,}$/;
        if (oYou.test(oInput[1].value)) {
            oSpan[1].innerHTML = " ";
            flagBain = true;
        } else {
            oSpan[1].innerHTML = "请重新输入"
            flagBain = false;
        }
    }

    //密码
    oInput[2].onblur = function () {
        var oMi = /^.{6,18}$/;
        if (oMi.test(oInput[2].value)) {
            oSpan[2].innerHTML = " ";
            flagMi = true;
        } else {
            oSpan[2].innerHTML = "请重新输入"
            flagMi = false;
        }
    }

    //姓
    oInput[3].onblur = function () {
        var oXing = /^[\u4e00-\u9fa5]{1,2}$/;
        if (oXing.test(oInput[3].value)) {
            oSpan[3].innerHTML = " ";
            flagXing = true;
        } else {
            oSpan[3].innerHTML = "请重新输入"
            flagXing = false;
        }
    }

    //名
    oInput[4].onblur = function () {
        var oMing = /^[\u4e00-\u9fa5]{1,4}$/;
        if (oMing.test(oInput[4].value)) {
            oSpan[4].innerHTML = " ";
            flagMing = true;
        } else {
            oSpan[4].innerHTML = "请重新输入"
            flagMing = false;
        }
    }

    //联系电话
    oInput[5].onblur = function () {
        var oTel = /^1(3|5|8|7)\d{9}$/;
        if (oTel.test(oInput[5].value)) {
            oSpan[5].innerHTML = " ";
            flagTel = true;
        } else {
            oSpan[5].innerHTML = "请重新输入"
            flagTel = false;
        }
    }
$(function(){

    $(".regist").click(function () {
        if (flagName & flagBain & flagMi & flagXing & flagMing & flagTel) {
            $.ajax({
                url: "../php/registered.php",
               
                type: "get",
                data: "zhanghao="+$("#zhanghao").val()+"&youxiang="+$("#youxiang").val()+"&mima="+$("#mima").val()+"&xing="+$("#xing").val()+"&ming="+$("#ming").val()+"&tel="+$("#tel").val(),
                success: function (resText) {
                    console.log(resText);
                    $("span").eq(0).html(resText);
                    if(resText=="注册成功"){
                        $(location).prop('href','login.html');
                    }
                }
            });
            
        }
    });
})

</script>